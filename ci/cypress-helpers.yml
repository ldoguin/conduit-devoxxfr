# -----------------------------
#  ğŸ› ï¸ Cypress Helpers
# -----------------------------

# Install Cypress and dependencies
.install-cypress: 
  before_script: |
    echo "ğŸ¤– Installing cypress dependencies... â³"
    sudo apt-get update
    DEBIAN_FRONTEND=noninteractive \
    sudo apt-get install -y libgtk2.0-0 libgtk-3-0 libgbm-dev libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 libxtst6 xauth xvfb

    echo "ğŸ¤– Installing Cypress... â³"
    npm -g install cypress
    echo "ğŸ¤– Cypress installed ğŸ‰"

.cypress-run: 
  script: |
    echo "ğŸš€ Running test ..." 
    echo "API root ${API_ROOT}"
    echo "Scope ${DB_SCOPE}"
    npm install
    cypress run -s cypress/e2e/comments-spec.js --headless --reporter junit
    